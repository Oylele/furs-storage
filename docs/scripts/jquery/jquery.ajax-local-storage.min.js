(function(a,b){"use strict";var c=function(a){var b;return a.cacheKey?"function"==typeof a.cacheKey?a.cacheKey(a):a.cacheKey:(b=a.url.replace(/jQuery.*/,""),!1===a.cache&&(b=b.replace(/([?&])_=[^&]*/,"")),b+a.type+(a.data||""))},d=function(a){if(!a)return!1;if(!0===a)return b.localStorage;if("object"==typeof a&&"getItem"in a&&"removeItem"in a&&"setItem"in a)return a;throw new TypeError("localCache must either be a boolean value, or an object which implements the Storage interface.")},f=function(a,b){a.removeItem(b),a.removeItem(b+"cachettl"),a.removeItem(b+"dataType")};a.ajaxPrefilter(function(a,b,e){var g,h,i=d(a.localCache),j=a.cacheTTL||5,k=a.cacheKey=c(a),l=a.isCacheValid,m=a.isResponseValid,n=a.thenResponse||null;i&&(g=i.getItem(k+"cachettl"),l&&"function"==typeof l&&!l()&&(f(i,k),g=0),g&&g<+new Date&&(f(i,k),g=0),h=i.getItem(k),!h&&e.then(n).then(function(b,c,d){var g=b,h=a.dataType||d.getResponseHeader("Content-Type")||"text/plain";if(!m||"function"!=typeof m||m(b,c,d)){-1!==h.toLowerCase().indexOf("json")&&(g=JSON.stringify(b));try{i.setItem(k,g),i.setItem(k+"cachettl",+new Date+3600000*j),i.setItem(k+"dataType",h)}catch(a){f(i,k),console.log("Cache Error:"+a,k,g)}}}))}),a.ajaxTransport("+*",function(a){if(a.localCache){var b=a.cacheKey,c=d(a.localCache),e=a.dataType||c.getItem(b+"dataType")||"text",f=!!c&&c.getItem(b);if(f)return-1!==e.toLowerCase().indexOf("json")&&(f=JSON.parse(f)),{send:function(a,b){var c={};c[e]=f,b(200,"success",c,"")},abort:function(){console.log("Aborted ajax transport for json cache.")}}}})})(jQuery,window);